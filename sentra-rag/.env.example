 # RAG：主流程总超时（ms），主程序等待 SDK 返回的时间上限
 # RAG 总超时
 # type: number
 # range: 1000-600000
 RAG_TIMEOUT_MS=8000
 
 # RAG：检索缓存 TTL（ms），同一 query 在 TTL 内复用，减少 Neo4j/Embedding 调用
 # 检索缓存 TTL
 # type: number
 # range: 0-3600000
 RAG_CACHE_TTL_MS=60000
 
 # RAG：注入证据最大字符数（<=0 不截断；>0 尽量按段落边界裁剪）
 # 证据最大字符数
 # type: number
 # range: -1-200000
 RAG_CONTEXT_MAX_CHARS=0
 
 # RAG：关键词扩展检索 - 最多抽取关键词数（0 关闭该扩展）
 # 关键词数量
 # type: number
 # range: 0-20
 RAG_KEYWORD_TOP_N=3
 
 # RAG：关键词扩展检索 - 每个关键词额外全文 topK（命中条数上限）
 # 关键词全文 TopK
 # type: number
 # range: 0-50
 RAG_KEYWORD_FULLTEXT_LIMIT=4
 
 # RAG：入库延迟（ms），用于写入 Neo4j 前节流/错峰（0 不延迟）
 # 入库延迟
 # type: number
 # range: 0-600000
 RAG_INGEST_DELAY_MS=0
 
 # Chat API Key（必填；仅用于合约生成 ingest/query 与最终回答）
 # Chat API 密钥
 # type: string
 rag_CHAT_API_KEY=
 
 # Chat Base URL（必填；OpenAI-compat 网关地址）
 # 辅助llm模型请求地址
 # type: string
 rag_CHAT_BASE_URL=https://yuanplus.chat/v1
 
 # Chat 请求超时（ms）
 # 辅助llm模型超时时间
 # type: number
 # range: 1000-900000
 rag_CHAT_TIMEOUT_MS=180000
 
 # Chat 模型（合约生成/回答）
 # 辅助llm模型
 # type: string
 rag_CHAT_MODEL=gemini-3-flash-preview
 
 # Chat 温度（建议 0，保证 XML 合约更稳定）
 # 辅助llm模型温度
 # type: number
 # range: 0.0-2.0
 rag_CHAT_TEMPERATURE=0
 
 # Chat 最大输出 token（控制 XML 合约长度上限；-1 表示不传递该限制，让模型自由输出）
 # 辅助llm模型最大输出
 # type: number
 # range: -1-10000
 rag_CHAT_MAX_OUTPUT_TOKENS=-1
 
 # Embedding API Key（必填；仅用于向量生成）
 # Embedding API 密钥
 # type: string
 rag_EMBEDDING_API_KEY=
 
 # Embedding Base URL（必填；OpenAI-compat embeddings 网关地址）
 # Embedding Base URL
 # type: string
 rag_EMBEDDING_BASE_URL=https://yuanplus.chat/v1
 
 # Embedding 请求超时（ms）
 # Embedding 超时
 # type: number
 # range: 1000-900000
 rag_EMBEDDING_TIMEOUT_MS=180000
 
 # Embedding 模型（需与 NEO4J_VECTOR_DIMENSIONS 对齐，如 text-embedding-3-small=1536）
 # Embedding 模型
 # type: string
 rag_EMBEDDING_MODEL=text-embedding-3-small
 
 # .env 热更新开关（关闭可设为 false/0/off）
 # .env 热更新
 # type: boolean
 # options: true | false
 rag_ENV_WATCH=true
 
 # 合约回显输入（将输出 XML 的 <normalized_input> 强制替换为真实输入，便于审计/回放）
 # 合约回显输入
 # type: boolean
 # options: true | false
 rag_CONTRACT_ECHO_INPUT=
 
 # 合约语言（影响提示词与抽取偏好）
 # 合约语言
 # type: enum
 # options: zh | en
 rag_SENTRA_CONTRACT_LANG=en

 
 # Neo4j Bolt URI
 # Neo4j URI
 # type: string
 rag_NEO4J_URI=bolt://localhost:7687
 
 # Neo4j 用户名
 # Neo4j 用户名
 # type: string
 rag_NEO4J_USERNAME=neo4j
 
 # Neo4j 密码
 # Neo4j 密码
 # type: string
 rag_NEO4J_PASSWORD=
 
 # Neo4j 数据库名（社区版通常为 neo4j）
 # Neo4j 数据库名
 # type: string
 rag_NEO4J_DATABASE=neo4j
 
 # 向量索引名（如用不同 schema 建过旧索引，建议换新名字避免冲突）
 # 向量索引名
 # type: string
 rag_NEO4J_VECTOR_INDEX=chunkChildEmbedding
 
 # 全文索引名
 # 全文索引名
 # type: string
 rag_NEO4J_FULLTEXT_INDEX=chunkText
 
 # 向量维度（必须与 embedding 模型输出维度一致）
 # 向量维度
 # type: number
 # range: 128-8192
 rag_NEO4J_VECTOR_DIMENSIONS=1536
 
 # 向量相似度度量
 # 向量相似度
 # type: enum
 # options: cosine
 rag_NEO4J_VECTOR_SIMILARITY=cosine
 
 
 # Rerank 总开关（query 模式精排）
 # 启用 Rerank
 # type: boolean
 # options: true | false
 rag_RERANK_ENABLE=
 
 # Rerank API Key（启用时必填）
 # Rerank API 密钥
 # type: string
 rag_RERANK_API_KEY=
 
 # Rerank Base URL
 # Rerank Base URL
 # type: string
 rag_RERANK_BASE_URL=
 
 # Rerank 模型名（启用时必填；取决于你的 rerank 服务）
 # Rerank 模型
 # type: string
 rag_RERANK_MODEL=
 
 # Rerank 请求超时（ms）
 # Rerank 超时
 # type: number
 # range: 1000-900000
 rag_RERANK_TIMEOUT_MS=180000
 
 # 重排候选 K（先取多少候选再做重排）
 # 重排候选 K
 # type: number
 # range: 1-200
 rag_RERANK_CANDIDATE_K=40
 
 # 重排最终保留 TopN
 # 重排 TopN
 # type: number
 # range: 1-200
 rag_RERANK_TOP_N=40

 # 全文检索 topK
 # 全文检索 TopK
 # type: number
 # range: 0-100
 rag_RETRIEVE_FULLTEXT_LIMIT=10
 
 # 向量检索 topK
 # 向量检索 TopK
 # type: number
 # range: 0-100
 rag_RETRIEVE_VECTOR_K=8
 
 # 混合检索 topK（向量部分）
 # 混合检索 TopK（向量）
 # type: number
 # range: 0-100
 rag_RETRIEVE_HYBRID_K_VECTOR=8
 
 # 混合检索 topK（全文部分）
 # 混合检索 TopK（全文）
 # type: number
 # range: 0-100
 rag_RETRIEVE_HYBRID_K_FULLTEXT=8
 
 # 是否对命中的 child chunk 做 parent 扩展（更像“段落级”内容）
 # 扩展父段落
 # type: boolean
 # options: true | false
 rag_RETRIEVE_EXPAND_PARENT=true
 
 # 拼接上下文最大字符预算（SDK 内部拼 contextText 的预算；建议设上限避免提示词过长）
 # 上下文字符预算
 # type: number
 # range: 1000-200000
 rag_RETRIEVE_BUDGET_CHARS=50000
 
 # 直接检索是否开启精排（true 时必须配置 rag_RERANK_*；不允许回退/降级）
 # 直接检索精排
 # type: boolean
 # options: true | false
 rag_RETRIEVE_RERANK_ENABLE=true
 
 # 直接检索精排候选 K
 # 直接检索候选 K
 # type: number
 # range: 1-200
 rag_RETRIEVE_RERANK_CANDIDATE_K=40
 
 # 直接检索精排最终保留 TopN
 # 直接检索 TopN
 # type: number
 # range: 1-200
 rag_RETRIEVE_RERANK_TOP_N=20
 
 # 是否输出 debug 结构（用于排查检索质量；会增加返回体积）
 # 输出 Debug
 # type: boolean
 # options: true | false
 rag_RETRIEVE_DEBUG=false
 
 
 # RAG SDK 日志级别
 # RAG 日志级别
 # type: enum
 # options: debug | info | warn | error
 rag_LOG_LEVEL=info
