# OpenAI 兼容 LLM 基础 URL
# type: string
OPENAI_BASE_URL=https://yuanplus.chat/v1

# OpenAI 兼容 API Key
# type: string
OPENAI_API_KEY=sk-REPLACE_ME

# 默认对话模型
# type: string
OPENAI_MODEL=gemini-flash-latest

# 采样温度
# type: number
# range: 0.0-2.0
OPENAI_TEMPERATURE=0.2

# 最大输出 Token（-1 表示不限制）
# type: number
# range: -1-128000
OPENAI_MAX_TOKENS=-1

# 向量嵌入模型（用于 MCP 内部相似度计算与结果复用）
# type: string
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# 可选：单独为嵌入配置 Base URL，未设置时回退到 OPENAI_BASE_URL
# type: string
EMBEDDING_BASE_URL=https://yuanplus.chat/v1

# 可选：单独为嵌入配置 API Key，未设置时回退到 OPENAI_API_KEY
# type: string
EMBEDDING_API_KEY=https://yuanplus.chat/v1

# 原生 tool 调用策略（auto/native/none）
# type: enum
# options: auto | native | none
OPENAI_TOOL_CHOICE=auto

# 工具调用策略（native/fc/auto）
# type: enum
# options: native | fc | auto
TOOL_STRATEGY=fc

# FC 模式使用的 LLM 基础 URL（未配置则回退到 OPENAI_*）
# type: string
FC_BASE_URL=https://yuanplus.chat/v1

# FC 模式 API Key
# type: string
FC_API_KEY=sk-REPLACE_ME

# FC 模式默认模型
# type: string
FC_MODEL=gemini-flash-latest

# FC 模式默认温度
# type: number
# range: 0.0-2.0
FC_TEMPERATURE=0.2

# FC 模式最大 Token 数（-1 表示不限制）
# type: number
# range: -1-128000
FC_MAX_TOKENS=-1

# FC 模式输出格式（sentra=ReAct 行协议）
# type: string
FC_FORMAT=sentra

# 规划阶段最大重试次数
# type: number
# range: 0-10
FC_PLAN_MAX_RETRIES=3

# 参数生成/纠错阶段最大重试次数
# type: number
# range: 0-10
FC_ARG_MAX_RETRIES=3

# 评估阶段最大重试次数
# type: number
# range: 0-10
FC_EVAL_MAX_RETRIES=3

# 最终总结阶段最大重试次数
# type: number
# range: 0-10
FC_SUMMARY_MAX_RETRIES=1

# Judge 阶段专用 FC 模型（支持逗号分隔多模型，按顺序优先级使用；留空回退 FC_MODEL）
# type: string
JUDGE_FC_MODEL=

# Plan 阶段专用 FC 模型（可选，支持逗号分隔多模型；多个模型时按模型维度生成候选计划并择优）
# type: string
PLAN_FC_MODEL=

# Arg 阶段专用 FC 模型
# type: string
ARG_FC_MODEL=

# Eval 阶段专用 FC 模型
# type: string
EVAL_FC_MODEL=

# Summary 阶段专用 FC 模型
# type: string
SUMMARY_FC_MODEL=

# Reflection 阶段专用 FC 模型
# type: string
REFLECTION_FC_MODEL=

# Plan 阶段采样温度（未设置则用 FC_TEMPERATURE）
# type: number
# range: 0.0-2.0
FC_PLAN_TEMPERATURE=0.1

# Plan 阶段 top_p（可留空）
# type: number
# range: 0.0-1.0
FC_PLAN_TOP_P=

# Eval 阶段采样温度
# type: number
# range: 0.0-2.0
FC_EVAL_TEMPERATURE=0.1

# Eval 阶段 top_p
# type: number
# range: 0.0-1.0
FC_EVAL_TOP_P=

# Summary 阶段采样温度
# type: number
# range: 0.0-2.0
FC_SUMMARY_TEMPERATURE=0.1

# Summary 阶段 top_p
# type: number
# range: 0.0-1.0
FC_SUMMARY_TOP_P=

# Reflection 阶段采样温度
# type: number
# range: 0.0-2.0
FC_REFLECTION_TEMPERATURE=0.2

# Reflection 阶段 top_p
# type: number
# range: 0.0-1.0
FC_REFLECTION_TOP_P=

# Reflection 阶段最大重试次数
# type: number
# range: 0-10
FC_REFLECTION_MAX_RETRIES=2

# 是否启用工具候选精排
# type: boolean
# options: true | false
RERANK_ENABLE=true

# 精排所用 LLM 基础 URL
# type: string
RERANK_BASE_URL=https://yuanplus.chat/v1

# 精排 LLM API Key
# type: string
RERANK_API_KEY=sk-REPLACE_ME

# 进入精排的候选数量（-1 表示全部）
# type: number
# range: -1-1000
RERANK_CANDIDATE_K=-1

# 精排后保留的候选数量（-1 表示不裁剪）
# type: number
# range: -1-1000
RERANK_TOP_N=-1

# 精排模型名称
# type: string
RERANK_MODEL=BAAI/bge-reranker-v2-m3

# 缺少 meta 描述时是否回退
# type: boolean
# options: true | false
RERANK_USE_DESC_FALLBACK=true

# 精排超时时间（毫秒）
# type: number
# range: 1000-300000
RERANK_TIMEOUT_MS=12000

# 最大子查询数（-1 或 0 表示不限制）
# type: number
# range: -1-1000
RERANK_MAX_SUBQUERIES=-1

# 精排聚合参数 alpha
# type: number
# range: 0.0-1.0
RERANK_AGG_ALPHA=0.1

# 精排聚合参数 beta
# type: number
# range: 0.0-1.0
RERANK_AGG_BETA=0.5

# 精排聚合参数 gamma
# type: number
# range: 0.0-1.0
RERANK_AGG_GAMMA=0.4

# 总结模型基础 URL
# type: string
SUMMARIZER_BASE_URL=https://yuanplus.chat/v1

# 总结模型 API Key
# type: string
SUMMARIZER_API_KEY=sk-REPLACE_ME

# 总结阶段模型
# type: string
SUMMARIZER_MODEL=gemini-flash-latest

# 总结阶段温度
# type: number
# range: 0.0-2.0
SUMMARIZER_TEMPERATURE=0.1

# 前置判定模型基础 URL
# type: string
JUDGE_BASE_URL=https://yuanplus.chat/v1

# 前置判定模型 API Key
# type: string
JUDGE_API_KEY=sk-REPLACE_ME

# 前置判定模型名称（支持逗号分隔多模型，按顺序优先级使用；第一个为主模型）
# type: string
JUDGE_MODEL=gpt-5-mini

# 前置判定温度
# type: number
# range: 0.0-2.0
JUDGE_TEMPERATURE=0.1

# 前置判定最大 Token（-1 表示不限）
# type: number
# range: -1-128000
JUDGE_MAX_TOKENS=-1

# 判定并发竞速的单次超时时间（毫秒）
# type: number
# range: 1000-300000
JUDGE_RACE_TIMEOUT_MS=12000

# Reasoner 模型基础 URL
# type: string
REASONER_BASE_URL=https://yuanplus.chat/v1

# Reasoner API Key
# type: string
REASONER_API_KEY=sk-REPLACE_ME

# Reasoner 模型名称
# type: string
REASONER_MODEL=gemini-2.5-flash-preview-09-2025

# Reasoner 温度
# type: number
# range: 0.0-2.0
REASONER_TEMPERATURE=0.2

# Reasoner 最大 Token（-1 表示不限）
# type: number
# range: -1-128000
REASONER_MAX_TOKENS=-1

# 规划阶段最大步骤数
# type: number
# range: 1-50
PLAN_MAX_STEPS=8

# 规划阶段最大并发
# type: number
# range: 1-50
PLAN_MAX_CONCURRENCY=3

# 规划/执行总时间预算（毫秒）
# type: number
# range: 1000-600000
PLAN_TOTAL_TIME_BUDGET_MS=60000

# 单次工具调用超时时间（毫秒）
# type: number
# range: 1000-600000
TOOL_TIMEOUT_MS=70000

# 默认 WebSocket SDK 调用超时时间（毫秒）
# type: number
# range: 1000-600000
WS_RPC_TIMEOUT_MS=120000

# 工具默认冷却时间（毫秒）
# type: number
# range: 0-600000
TOOL_COOLDOWN_DEFAULT_MS=

# 函数内部冷却重试次数（建议 0）
# type: number
# range: 0-10
TOOL_COOLDOWN_FUNC_RETRY=0

# 是否启用工具结果缓存（仅缓存成功结果）
# type: boolean
# options: true | false
TOOL_CACHE_ENABLE=false

# 工具缓存 TTL（秒）
# type: number
# range: 0-2592000
TOOL_CACHE_TTL_SEC=600

# 允许缓存的工具列表（逗号分隔，空=全部）
# type: string
TOOL_CACHE_ALLOWLIST=

# 禁止缓存的工具列表（逗号分隔，优先生效）
# type: string
TOOL_CACHE_DENYLIST=

# 向量记忆与结果缓存在 Redis 中使用的键前缀
# type: string
MEM_PREFIX=sentra:mcp:result:mem

# 是否启用向量记忆与结果复用（依赖 Redis）
# type: boolean
# options: true | false
MEM_ENABLE=false

# 是否启用基于 args 向量的工具结果复用
# type: boolean
# options: true | false
MEM_RESULT_CACHE_ENABLE=false

# 结果复用相似度阈值（0-1），默认 0.97
# type: number
# range: 0.0-1.0
MEM_RESULT_REUSE_THRESHOLD=0.97

# 结果复用缓存 TTL（秒），默认 86400 ≈ 1 天
# type: number
# range: 0-2592000
MEM_RESULT_TTL_SEC=86400

# 允许结果复用的工具 aiName 列表（逗号分隔，空=全部）
# type: string
MEM_RESULT_CACHE_ALLOWLIST=

# 禁止结果复用的工具 aiName 列表（逗号分隔，优先生效）
# type: string
MEM_RESULT_CACHE_DENYLIST=local__av_transcribe,local__bilibili_search,local__video_generate,local__video_vision_read,local__image_vision_edit,local__image_vision_read,local__document_read,local__document_read,local__image_draw,local__qq_message_send,local__qq_message_recall,local__qq_message_emojiLike,local__qq_message_recentContact,local__qq_group_ban,local__qq_group_kick,local__qq_group_leave,local__qq_group_setCard,local__qq_group_setName,local__qq_group_wholeBan,local__qq_user_deleteFriend,local__qq_user_sendLike,local__qq_user_sendPoke,local__qq_account_setQQAvatar,local__qq_account_setQQProfile,local__qq_account_setSelfLongnick,local__qq_system_setDiyOnlineStatus,local__qq_system_setModelShow,local__qq_system_setOnlineStatus

# 允许“立即执行 + 延迟发送”的工具 aiName 列表（逗号分隔，使用 local__ 等等前缀）。
# type: string
SCHEDULE_IMMEDIATE_AI_ALLOWLIST=local__image_draw

# 显式禁止“立即执行”的工具 aiName 列表（逗号分隔，使用 local__ 等等前缀，优先级高于 allowlist）。
# type: string
SCHEDULE_IMMEDIATE_AI_DENYLIST=local__qq_message_send,local__qq_message_recall,local__qq_message_emojiLike,local__qq_message_recentContact,local__qq_group_ban,local__qq_group_kick,local__qq_group_leave,local__qq_group_setCard,local__qq_group_setName,local__qq_group_wholeBan,local__qq_group_info,local__qq_group_list,local__qq_group_memberInfo,local__qq_group_memberList,local__qq_system_setDiyOnlineStatus,local__qq_system_setModelShow,local__qq_system_setOnlineStatus,local__qq_system_getModelShow,local__qq_system_getUserStatus,local__qq_user_sendLike,local__qq_user_sendPoke,local__qq_user_deleteFriend,local__qq_user_getProfileLike,local__qq_account_setQQAvatar,local__qq_account_setQQProfile,local__qq_account_setSelfLongnick,local__qq_account_getQQProfile,local__qq_avatar_get,local__music_card,local__custom_music_card,local__desktop_control

# 单工具默认并发上限
# type: number
# range: 1-100
PLANNER_TOOL_CONCURRENCY_DEFAULT=5

# 单提供方默认并发上限
# type: number
# range: 1-200
PLANNER_PROVIDER_CONCURRENCY_DEFAULT=10

# 治理默认 Scope
# type: string
DEFAULT_SCOPE=global

# 治理默认租户 ID
# type: string
DEFAULT_TENANT_ID=default

# Redis 主机地址
# type: string
REDIS_HOST=127.0.0.1

# Redis 端口
# type: number
# range: 1024-65535
REDIS_PORT=6379

# Redis 数据库编号
# type: number
# range: 0-15
REDIS_DB=0

# Redis 密码
# type: string
REDIS_PASSWORD=

# Redis 指标前缀
# type: string
REDIS_METRICS_PREFIX=sentra:mcp:metrics

# Redis 上下文前缀
# type: string
REDIS_CONTEXT_PREFIX=sentra:mcp:ctx

# MCP Server 传输方式（stdio/http 等）
# type: enum
# options: stdio | http
MCP_SERVER_TRANSPORT=stdio

# MCP HTTP Server 端口
# type: number
# range: 1024-65535
HTTP_PORT=3001

# 允许的主机列表（逗号分隔）
# type: string
ALLOWED_HOSTS=127.0.0.1,localhost

# 是否开启全局修复/回滚重试
# type: boolean
# options: true | false
RUN_ENABLE_REPAIR=false

# 全局修复循环上限次数
# type: number
# range: 0-20
RUN_MAX_REPAIRS=0

# 重试时是否强制多样化路径
# type: boolean
# options: true | false
RETRY_DIVERSIFY=true